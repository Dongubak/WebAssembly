# 웹 어셈블리를 사용하여 모듈 컴파일하기

이 문서에서는 C/C++로 작성된 모듈을 Emscripten을 사용하여 컴파일하는 것을 설명하는 문서입니다.

---

### 1단계 예시 컴파일하기

환경 세팅이 완료된 후라면 C로 작성된 예시파일을 컴파일 할 수 있습니다. 다양한 옵션이 있으며 저는 아래의 내용을 다룰 것입니다.

- Wasm 파일을 생성하기 위해 컴파일 합니다. 그리고 HTML로 우리의 코드를 생성할 겁니다. 웹 환경에서 Wasm을 실행하기 위해서는 Javascript "glue"코드가 필요한데요 이것도 다룹니다.

**HTML과 JavaScript 생성하기**
다음 예제는 매우 심플한 예제입니다.

1. 먼저 아래의 예시처럼 작성된 C코드를 생성합니다.

  ```c
    #include <stdio.h>

    int main() {
      printf("Hello world");
      return 0;
    }
  ```

2. 터미널을 이용하여 컴파일 환경에서 컴파일을 진행합니다. 여기서 우리가 만든 hello.c를 컴파일 합니다.

  ```bash
    emcc hello.c -o hello.html
  ```

  > -o hello.html 옵션은 우리가 HTML 페이지 코드를 생성한다는 의미 입니다. 또한 자바스크립트 "glue"코드또한 실행시키는 페이지를 생성합니다.

여기서 우리는 디렉토리에서 다음 파일이 있어야 합니다.
- hello.wasm(바이너리 Wasm 모듈 코드)
- hello.js(native C 함수와 자바스크립트 사이의 번역을 위한 glue코드가 포함된 javascript 파일)
- hello.html(Wasm code를 로드, 컴파일, 인스턴스화 하고 실행하여 브라우저에서 출력을 보여주는 파일)

3. hello.c 실행하기

Live Server를 사용하거나 python 서버를 사용할 수 있으며, 실행시 브라우저에서 해당 코드가 실행되어 콘솔 출력을 확인할 수 있습니다.
